source ./design.config
source ./modelsim/env.config

print_config

# Load regression list
if [file exists $TEST_LIST] {
   set fp [open $TEST_LIST r]
   set test_list [read $fp]
} else {
   puts "NOTE: regression file list does not exist!"
}

# ucdb files
set ucdb_filelist ""
foreach _test $test_list {
   lappend ucdb_filelist $coverage/$_test.ucdb 
}

foreach _test $test_list {

  set fp [open "./run.all" "w"]
  puts $fp "coverage attribute -name TESTNAME -value $_test; \
     		coverage save -onexit $coverage/$_test.ucdb; \
	      onbreak {resume}; \
          log /* -r; \
          run -all;"
  close $fp
  run_test $_test
}


quit
